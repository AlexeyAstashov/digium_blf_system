
# Digium BLF System

Ğ’ĞµĞ±-Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ Ğ´Ğ»Ñ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ°Ğ´Ñ€ĞµÑĞ½Ğ¾Ğ¹ ĞºĞ½Ğ¸Ğ³Ğ¸ BLF (Busy Lamp Field) Ğ´Ğ»Ñ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ¾Ğ² **Digium**. ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ğ²Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½ĞµĞ¼Ñƒ Ğ½Ğ¾Ğ¼ĞµÑ€Ñƒ Ğ¸ Ğ¿Ğ°Ñ€Ğ¾Ğ»Ñ, ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ´Ğ¾ **105 ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ¾Ğ²** Ğ½Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ¸ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºÑƒÑ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ XML-Ñ„Ğ°Ğ¹Ğ»Ğ° Ğ´Ğ»Ñ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ¾Ğ².


![Ğ¡ĞºÑ€Ğ¸Ğ½ÑˆĞ¾Ñ‚ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ](https://github.com/user-attachments/assets/83d12658-5310-4e14-b93e-694c7b1f31fc)
![Ğ¡ĞºÑ€Ğ¸Ğ½ÑˆĞ¾Ñ‚ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ SmartBLF](https://github.com/user-attachments/assets/8a921acd-4829-4c35-a79e-70add3c6e3de)

## ğŸš€ Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸

- ğŸ” ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ğ½Ğ¾Ğ¼ĞµÑ€Ñƒ Ğ¸ Ğ¿Ğ°Ñ€Ğ¾Ğ»Ñ
- ğŸ“‡ Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¿Ğ¸ÑĞºĞ¾Ğ¼ BLF-ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ¾Ğ²
- âœ… ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ½Ğ° ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ğ¸ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ½Ğ¾ÑÑ‚ÑŒ Ğ½Ğ¾Ğ¼ĞµÑ€Ğ¾Ğ²
- ğŸ–¨ ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ XML-Ñ„Ğ°Ğ¹Ğ»Ğ° Ğ´Ğ»Ñ Digium-Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ¾Ğ²
- ğŸ”„ ĞœĞ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ°Ñ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ¾Ğ² Ñ‡ĞµÑ€ĞµĞ· Asterisk
- ğŸ‘¤ ĞĞ´Ğ¼Ğ¸Ğ½ĞºĞ° Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸ĞµĞ¼ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸

![ÑĞºÑ€Ğ¸Ğ½ÑˆĞ¾Ñ‚ Ğ¿Ğ°Ğ½ĞµĞ»Ğ¸ Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ°](https://github.com/user-attachments/assets/c4a7fc09-4de3-4e6a-8fa7-e5007c4f1466)

## ğŸ“ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```bash
digium_blf_system/
â”œâ”€â”€ index.php           # ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
â”œâ”€â”€ editor.php          # Ğ˜Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ¾Ğ² Ğ´Ğ»Ñ BFL 
â”œâ”€â”€ editor.css          # Ğ¡Ñ‚Ğ¸Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞ°
â”œâ”€â”€ generate.php        # Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ XML
â”œâ”€â”€ admin.php           # ĞŸĞ°Ğ½ĞµĞ»ÑŒ Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ°
â”œâ”€â”€ config.php          # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ğº Ğ‘Ğ”
â”œâ”€â”€ style.css           # Ğ¡Ñ‚Ğ¸Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞ°
â”œâ”€â”€ create_hash.php     # ĞŸĞµÑ€Ğ²Ğ¸Ñ‡Ğ½Ğ°Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ°Ñ€Ğ¾Ğ»Ñ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑŒÑ‰Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ admin Ğ² Ğ‘Ğ”
â”œâ”€â”€ logout.php          
â””â”€â”€ ...
```
---
ğŸ› ï¸ ĞĞ´Ğ¼Ğ¸Ğ½ĞºĞ°
Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸:

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ, ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ğ¸ ÑĞ¼ĞµĞ½Ğ° Ğ¿Ğ°Ñ€Ğ¾Ğ»Ñ

Ğ’ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ğ°Ñ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ **admin**


âš™ï¸ **Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°**
ĞšĞ»Ğ¾Ğ½Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹:
```
git clone https://github.com/AlexeyAstashov/digium_blf_system.git
```

ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‚Ğµ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº Ğ±Ğ°Ğ·Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ² **config.php**:
```
return [
    'db_host' => 'localhost',
    'db_name' => 'blf_system',
    'db_user' => 'user',
    'db_pass' => 'password'
];
```
Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:
```
mysql -u root -p blf_system < blf_structure.sql
```
Ğ¤Ğ°Ğ¹Ğ» **blf_structure.sql** ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†.

Ğ”Ğ°Ğ¹Ñ‚Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ° Ğ½Ğ° Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ğ²ĞµĞ±-ÑĞµÑ€Ğ²ĞµÑ€Ñƒ:
```
chown -R asterisk:asterisk /var/www/html/digium_phones
chmod -R 755 /var/www/html/digium_phones
```

## ğŸ”„ ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹

ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ñ Ğ²Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½Ğ¸Ğ¼ Ğ½Ğ¾Ğ¼ĞµÑ€Ğ¾Ğ¼ Ğ¸ Ğ¿Ğ°Ñ€Ğ¾Ğ»ĞµĞ¼.

Ğ˜Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ **editor.php** Ğ¿Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑĞµÑ‚ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ¾ 105 BLF-ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ¾Ğ².

ĞŸÑ€Ğ¸ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ÑÑ XML-Ñ„Ğ°Ğ¹Ğ» <ext>.xml.

Asterisk Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñƒ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ°Ğ¼ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ.

## ğŸ” Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ
Ğ¥ĞµÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ°Ñ€Ğ¾Ğ»ĞµĞ¹ (bcrypt)

ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ½Ğ¾Ğ¼ĞµÑ€Ğ° Ğ¸ Ğ¿Ğ°Ñ€Ğ¾Ğ»Ñ Ğ¿Ñ€Ğ¸ Ğ²Ñ…Ğ¾Ğ´Ğµ

ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ admin

**index.php?logout** â€” Ğ´Ğ»Ñ Ğ²Ñ‹Ñ…Ğ¾Ğ´Ğ° Ğ¸Ğ· ÑĞµÑÑĞ¸Ğ¸

## ğŸ“Œ Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
**PHP 5.6+**

**MariaDB / MySQL**

Asterisk + Digium Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ñ‹ (Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° XML BLF)

Apache Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ¾Ğ¼ Ğ½Ğ° /var/www/html/digium_phones/

## ğŸ“ƒ Ğ›Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸Ñ
Ğ›Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸Ñ: [GNU GPL v3](LICENSE)

-------------------------------------------------------------------------------

# ğŸ“ Digium BLF System

A web interface for managing personal **BLF (Busy Lamp Field)** contact lists for **Digium phones**. Supports authentication by extension and password, up to **105 BLF contacts per user**, and automatic XML generation for phone configuration.

## ğŸš€ Features

- ğŸ” Login by extension and password
- ğŸ“‡ Manage up to 105 BLF contacts per user
- âœ… Validation and duplicate checks for extensions
- ğŸ–¨ Automatic XML file generation for Digium phones
- ğŸ”„ Instant configuration reload via Asterisk
- ğŸ‘¤ Admin panel with user management

---
## ğŸ“ Project Structure
```
digium_blf_system/
â”œâ”€â”€ index.php # Login page
â”œâ”€â”€ editor.php # BLF contact editor
â”œâ”€â”€ editor.css # Editor styling
â”œâ”€â”€ generate.php # XML generation logic
â”œâ”€â”€ admin.php # Admin panel
â”œâ”€â”€ config.php # DB connection settings
â”œâ”€â”€ style.css # Common styles
â”œâ”€â”€ create_hash.php # Initial admin password hash generator
â”œâ”€â”€ logout.php # Logout handler
â””â”€â”€ ...
```
---

## ğŸ› ï¸ Admin Panel

- Create, delete, and change passwords for users
- Admin user (`admin`) is protected from deletion
- Simple and intuitive interface

---

## âš™ï¸ Installation

1. Clone the repository:

```
git clone https://github.com/AlexeyAstashov/digium_blf_system.git
```
Configure database connection in ***config.php***:

```
return [
    'db_host' => 'localhost',
    'db_name' => 'blf_system',
    'db_user' => 'user',
    'db_pass' => 'password'
];
```

Import database structure:

```
mysql -u root -p blf_system < blf_structure.sql
```
The blf_structure.sql file contains only the database schema.

Set correct file permissions:

```
chown -R asterisk:asterisk /var/www/html/digium_phones
chmod -R 755 /var/www/html/digium_phones
```

ğŸ”„ How It Works
User logs in with extension and password.

***editor.php*** interface allows editing up to 105 BLF contacts.

Saving the form generates an XML file: <ext>.xml.

Asterisk triggers phones to reload the updated configuration.

## ğŸ” Security
Passwords are hashed with bcrypt

Input validation and access protection

**admin** user cannot be deleted

Supports session logout via **index.php?logout**

## ğŸ“Œ Requirements
**PHP 5.6+**

**MariaDB / MySQL**

Asterisk with Digium phones (XML BLF support)

Apache or Nginx with access to /var/www/html/digium_phones/


## ğŸ“ƒ License
License: [GNU GPL v3](LICENSE)
